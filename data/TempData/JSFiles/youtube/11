(function(){function h(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(){var c=d.slice();c.push.apply(c,arguments);return a.apply(b,c)}}function m(a,b){if(a){var c=Array.prototype.slice.call(arguments,1);try{return a.apply(null,c)}catch(d){return d}}}function n(){return+new Date}function aa(a){var b=(parseInt(p.uid,10)||0)+1;return a["spf-key"]||(a["spf-key"]=""+q("uid",b))}
var r={"animation-class":"spf-animate","animation-duration":425,"cache-lifetime":6E5,"cache-max":50,"link-class":"spf-link","nolink-class":"spf-nolink","navigate-limit":20,"navigate-lifetime":864E5,"navigate-requested-callback":null,"navigate-received-callback":null,"navigate-processed-callback":null,"navigate-error-callback":null,"process-async":!1,"request-timeout":0,"script-loading-callback":null,"style-loading-callback":null,"url-identifier":"?spf=__type__"};function t(a){return u()[a]}
function u(a){return!a&&"config"in p?p.config:q("config",a||{})}function q(a,b){return p[a]=b}var p=window._spf_state||{};window._spf_state=p;function v(a){return a.classList?a.classList:a.className&&a.className.match(/\S+/g)||[]}function w(a,b){if(a.classList)return a.classList.contains(b);for(var c=v(a),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}function x(a,b){a.classList?a.classList.add(b):w(a,b)||(a.className+=" "+b)}function y(a,b){if(a.classList)a.classList.remove(b);else{for(var c=v(a),d=[],e=0,f=c.length;e<f;e++)c[e]!=b&&d.push(c[e]);a.className=d.join(" ")}};function ba(a){if(document.querySelectorAll)return document.querySelectorAll(a);if(z){var b=document.createElement("style"),c=document.getElementsByTagName("head")[0];c.appendChild(b);window.__qsa=[];b.styleSheet.cssText=a+"{x:expression(__qsa.push(this))}";document.body.style.cssText+="";document.body.style.zoom=1;c.removeChild(b);return window.__qsa.slice(0)}return[]}
function ca(a){var b,c=a.parentNode;if(c&&11!=c.nodeType)if(a.removeNode)a.removeNode(!1);else{for(;b=a.firstChild;)c.insertBefore(b,a);c.removeChild(a)}}function A(a,b,c){for(;a;){if(b(a))return a;if(c&&a==c)break;a=a.parentNode}return null}function da(a){a=a||"";var b=document,c=b.createElement("iframe");c.id=a;c.src='javascript:""';c.style.display="none";b.body.appendChild(c);return c}var z="Microsoft Internet Explorer"==navigator.appName;function ea(a,b){B(!1,a,b,void 0)}function C(a,b,c){B(!0,a,b,c)}function B(a,b,c,d){if(b||c){b=b||window.location.href;c=c||{};var e=n();q("history-timestamp",e);c["spf-timestamp"]=e;a?window.history.replaceState(c,"",b):window.history.pushState(c,"",b);q("history-url",b);d&&(a=p["history-callback"])&&a(b,c)}}
function D(a){var b=window.location.href;if(a.state){a=a.state;var c=a["spf-timestamp"];b==p["history-url"]?(q("history-timestamp",c),window.history.replaceState(a,"",b)):(a["spf-back"]=c<parseInt(p["history-timestamp"],10),q("history-timestamp",c),q("history-url",b),(c=p["history-callback"])&&c(b,a))}};function fa(){var a=E(),b;for(b in a)F(a[b])||delete a[b]}function F(a){if(!(a&&"data"in a))return!1;var b=a.life,b=isNaN(b)?Infinity:b,c=n()-a.time,d=parseInt(t("cache-max"),10),d=isNaN(d)?Infinity:d;a=(parseInt(p["cache-counter"],10)||0)-a.count;return c<b&&a<d}function E(){return"cache-storage"in p?p["cache-storage"]:q("cache-storage",{})};function G(a,b,c,d){var e=d||{},f=!1,g=0,l,k=H();k.open(a,b,!0);k.timing={};var Aa=k.abort;k.abort=function(){clearTimeout(l);k.onreadystatechange=null;Aa.call(k)};k.onreadystatechange=function(){var a=k.timing;2==k.readyState?(a.responseStart=a.responseStart||n(),f=-1<(k.getResponseHeader("Transfer-Encoding")||"").toLowerCase().indexOf("chunked"),e.u&&e.u(k)):3==k.readyState?f&&e.j&&(a=k.responseText.substring(g),g=k.responseText.length,e.j(k,a)):4==k.readyState&&(a.responseEnd=a.responseEnd||n(),
f&&e.j&&k.responseText.length>g&&(a=k.responseText.substring(g),g=k.responseText.length,e.j(k,a)),clearTimeout(l),e.t&&e.t(k))};a="POST"==a;if(e.headers)for(var J in e.headers)k.setRequestHeader(J,e.headers[J]),"content-type"==J.toLowerCase()&&(a=!1);a&&k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");0<e.w&&(l=setTimeout(function(){k.abort();e.v&&e.v(k)},e.w));k.timing.fetchStart=n();k.send(c);return k}var H;
H="XMLHttpRequest"in window?function(){return new XMLHttpRequest}:"ActiveXObject"in window?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0;var I=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")};function K(a){for(var b=0,c=0,d=a.length;c<d;++c)b=31*b+a.charCodeAt(c),b%=4294967296;return b}function ga(){return"loaded".replace(/([A-Z])/g,"-$1").toLowerCase()};function ha(a){return a.dataset?a.dataset.loaded:a.getAttribute("data-"+ga())};function ia(a,b){if(a&&b){var c=L();a in c||(c[a]=[]);c[a].push(b)}}function ja(a,b){var c=L();if(a in c)for(var d=Array.prototype.slice.call(arguments,1),e=0,f=c[a].length;e<f;e++)c[a][e]&&c[a][e].apply(null,d)}function M(a){var b=L();a?a in b&&delete b[a]:L({})}function L(a){return!a&&"pubsub-subs"in p?p["pubsub-subs"]:q("pubsub-subs",a||{})};function ka(a,b,c,d){if("js"!=a&&"css"!=a)return null;var e=a+"-"+K(b);d=d||"";var f=document.getElementById(e),g=f&&ha(f),l=f&&!g;if(g)return c&&c(),f;c&&ia(e,c);if(l)return f;c="js"==a;var k=d?ba((c?"script":"link")+"."+d):[];m(t(c?"script-loading-callback":"style-loading-callback"),b,d);return f=la(a,b,e,d,function(){if(!ha(f)){var a=f;a.dataset?a.dataset.loaded="true":a.setAttribute("data-"+ga(),"true");ma(k);ja(e);M(e)}})}
function la(a,b,c,d,e,f){if("js"!=a&&"css"!=a)return null;var g=document.createElement("js"==a?"script":"link");g.id=c;g.className=d;"css"==a&&(g.rel="stylesheet");g.onload=function(){e&&setTimeout(e,0)};g.onreadystatechange=function(){switch(g.readyState){case "loaded":case "complete":g.onload()}};"js"==a?g.src=b:g.href=b;b=f||document;b=b.getElementsByTagName("head")[0]||b.body;"js"==a?b.insertBefore(g,b.firstChild):b.appendChild(g);return g}
function na(a,b){if("js"==a||"css"==a){var c=document.getElementById(a+"-"+K(b));c&&ma([c])}}function ma(a){for(var b=0,c=a.length;b<c;b++)M(a[b].id),a[b].parentNode.removeChild(a[b])}
function oa(a,b){if("js"==a||"css"==a){var c=a+"-"+K(b),d=document.getElementById(c);if(!d){var d=a+"-prefetch",e=document.getElementById(d);if(e){if(d=e.contentWindow.document.getElementById(c))return}else e=da(d);setTimeout(function(){var d=e.contentWindow.document;if("js"==a){var g=d.createElement("object");g.id=c;z?d.createElement("script").src=b:g.data=b;d.body.appendChild(g)}else la(a,b,c,"",null,d)},0)}}};function pa(a,b,c){return ka("js",a,b,c)}function qa(a){oa("js",a)}
function N(a,b){if(0>=a.scripts.length)b&&b();else{var c=-1,d=function(){c++;if(c<a.scripts.length){var e=a.scripts[c];if(e.url)pa(e.url,d,e.name);else if(e.text){var f=e.text,e=d;if(window.execScript)window.execScript(f,"JavaScript");else{var g=document.createElement("script");g.appendChild(document.createTextNode(f));f=document.getElementsByTagName("head")[0]||document.body;f.insertBefore(g,f.firstChild)}e&&e()}else d()}else b&&b()};d()}}
function ra(a){if(!(0>=a.scripts.length))for(var b=0,c=a.scripts.length;b<c;b++){var d=a.scripts[b];d.url&&qa(d.url)}}function O(a){var b=new sa;if(!a)return b;a=a.replace(ta,function(a,d,e){a=(a=d.match(ua))?a[1]:"";d=(d=d.match(va))?d[1]:"";b.scripts.push({url:a,text:e,name:d});return""});b.h=a;return b}function sa(){this.h="";this.scripts=[]}var ta=/\x3cscript([\s\S]*?)\x3e([\s\S]*?)\x3c\/script\x3e/ig,ua=/src="([\S]+)"/,va=/class="([\S]+)"/;function wa(a,b,c){return ka("css",a,b,c)}function xa(a){oa("css",a)}function ya(a){var b=new za;if(!a)return b;a=a.replace(Ba,function(a,d){if(-1!=d.indexOf('rel="stylesheet"')){var e=d.match(Ca),e=e?e[1]:"",f=d.match(Da),f=f?f[1]:"";b.c.push({url:e,text:"",name:f});return""}return a});a=a.replace(Ea,function(a,d,e){b.c.push({url:"",text:e,name:""});return""});b.h=a;return b}function za(){this.h="";this.c=[]}
var Ba=/\x3clink([\s\S]*?)\x3e/ig,Ea=/\x3cstyle([\s\S]*?)\x3e([\s\S]*?)\x3c\/style/ig,Ca=/href="([\S]+)"/,Da=/class="([\S]+)"/;function P(a,b,c){if(a&&b){var d=Q[a];d||(d=Q[a]={items:[],m:0,l:1});d.items.push({D:b,C:c||0})}}function R(a,b){var c=Q[a];if(c){var d=0<c.m;0<c.l&&(b||!d)&&Fa(a,b)}}function S(a){(a=Q[a])&&a.l--}function T(a,b){var c=Q[a];c&&(c.l++,R(a,b))}function Fa(a,b){var c=Q[a];if(c&&(clearTimeout(c.m),c.m=0,0<c.l)){var d=c.items.shift();if(d){var e=h(Fa,null,a,b),e=h(function(a,b){a();b()},null,d.D,e);b?e():c.m=setTimeout(e,d.C)}}}var Q={};function U(a){var b=document.createElement("a");b.href=a;return b.href};function Ga(a,b){if(b){var c=[],d,e=0,f=a.indexOf("[\r\n",e);for(-1<f&&(e=f+3);-1<(f=a.indexOf(",\r\n",e));)d=I(a.substring(e,f)),e=f+3,d&&c.push(V(d));f=a.indexOf("]\r\n",e);-1<f&&(d=I(a.substring(e,f)),e=f+3,d&&c.push(V(d)));d="";a.length>e&&(d=a.substring(e));return{i:c,g:d}}c=V(a);c="number"==typeof c.length?c:[c];return{i:c,g:""}}var V=function(){return"JSON"in window?function(a){return JSON.parse(a)}:function(a){return eval("("+a+")")}}();
function W(a,b,c,d){var e="process "+U(a),f=!t("process-async");b.timing||(b.timing={});b.title&&(document.title=b.title);a=h(function(a,b){var c=ya(a);if(!(0>=c.c.length))for(var d=0,e=c.c.length;d<e;d++){var f=c.c[d];if(f.url)wa(f.url,null,f.name);else if(f.text){var f=f.text,g=document.createElement("style");(document.getElementsByTagName("head")[0]||document.body).appendChild(g);"styleSheet"in g?g.styleSheet.cssText=f:g.appendChild(document.createTextNode(f))}}b.spfProcessCss=n()},null,b.css,
b.timing);P(e,a);a=h(function(a,b){for(var c in a){var d=document.getElementById(c);if(d){var e=a[c],f=void 0;for(f in e){var g=e[f];"class"==f?d.className=g:"style"==f?d.style.cssText=g:d.setAttribute(f,g)}}}b.spfProcessAttr=n()},null,b.attr||{},b.timing);P(e,a);var g=b.html||{},l;for(l in g)a=h(function(a,b){var d=document.getElementById(a);if(d){var g=O(b),l=t("animation-class");if(Ha&&w(d,l)){S(e);var s=aa(d);R(s,!0);g={r:g,reverse:!!c,d:null,f:null,e:d,A:l+"-old",B:l+"-new",s:c?l+"-reverse-start":
l+"-forward-start",q:c?l+"-reverse-end":l+"-forward-end"};d=h(function(a){x(a.e,a.s);a.d=document.createElement("div");a.d.className=a.A;var b=a.e,c=a.d;if(c){for(var d;d=b.firstChild;)c.appendChild(d);b.appendChild(c)}a.f=document.createElement("div");a.f.className=a.B;a.f.innerHTML=a.r.h;a.reverse?(b=a.d,b.parentNode.insertBefore(a.f,b)):(b=a.d,b.parentNode.insertBefore(a.f,b.nextSibling))},null,g);P(s,d,0);d=h(function(a){y(a.e,a.s);x(a.e,a.q)},null,g);P(s,d,0);d=h(function(a){a.e.removeChild(a.d);
y(a.e,a.q);ca(a.f);S(s);N(a.r,function(){T(s)})},null,g);P(s,d,parseInt(t("animation-duration"),10));P(s,function(){T(e)});R(s)}else d.innerHTML=g.h,S(e),N(g,function(){T(e,f)})}},null,l,g[l],b.timing),P(e,a);a=h(function(a){a.spfProcessHtml=n()},null,b.timing);P(e,a);a=h(function(a,b){S(e);N(O(a),function(){b.spfProcessJs=n();T(e,f)})},null,b.js,b.timing);P(e,a);d&&P(e,d);R(e,f)}
function Ia(a,b){var c="preprocess "+U(a),d;d=h(function(a){a=ya(a);if(!(0>=a.c.length))for(var b=0,c=a.c.length;b<c;b++){var d=a.c[b];d.url&&xa(d.url)}},null,b.css);P(c,d);var e=b.html||{},f;for(f in e)d=h(function(a,b){ra(O(b))},null,f,e[f]),P(c,d);d=h(function(a){ra(O(a))},null,b.js);P(c,d);R(c)}var Ha=function(){var a=document.createElement("div");if("transition"in a.style)return!0;for(var b=["Webkit","Moz","Ms","O","Khtml"],c=0,d=b.length;c<d;c++)if(b[c]+"Transition"in a.style)return!0;return!1}();function X(a,b){var c=b||{};c.method=((c.method||"GET")+"").toUpperCase();c.type=c.type||"request";var d=U(a),e;e=d;var f=c.type,g=t("url-identifier")||"";g&&(g=g.replace("__type__",f||""),e=0==g.lastIndexOf("?",0)&&-1!=e.indexOf("?")?e+g.replace("?","&"):e+g);f={};f.startTime=n();f.fetchStart=f.startTime;n:{g=E();if(d in g){g=g[d];if(F(g)){d=g.data;break n}g=E();d in g&&delete g[d]}d=void 0}if(d)return c=h(Ja,null,a,c,f,d),setTimeout(c,0),null;d={"X-SPF-Request":c.type};c.p&&(d["X-SPF-Referer"]=
c.p);var l={o:!1,g:"",complete:[]},g=h(Ka,null,a,l),k=h(La,null,a,c,l),f=h(Ma,null,a,c,f,l),f={headers:d,w:t("request-timeout"),u:g,j:k,t:f,v:f};return"POST"==c.method?G("POST",e,c.n,f):G("GET",e,null,f)}function Ja(a,b,c,d){c.responseStart=c.responseEnd=n();"navigate"==b.type&&(c.navigationStart=c.startTime);if(b.b&&"multipart"==d.type)for(var e=d.parts,f=0;f<e.length;f++)b.b(a,e[f]);Na(a,b,c,d,!1)}
function Ka(a,b,c){a=c.getResponseHeader("X-SPF-Response-Type")||"";b.o=-1!=a.toLowerCase().indexOf("multipart")}function La(a,b,c,d,e){if(c.o){e=c.g+e;var f;try{f=Ga(e,!0)}catch(g){d.abort();b.a&&b.a(a,g);return}if(b.b)for(d=0;d<f.i.length;d++)b.b(a,f.i[d]);c.complete=c.complete.concat(f.i);c.g=f.g}}
function Ma(a,b,c,d,e){if(e.timing)for(var f in e.timing)c[f]=e.timing[f];"navigate"==b.type&&(c.navigationStart=c.startTime);var g;if(d.complete.length)g=d.complete;else{try{g=Ga(e.responseText).i}catch(l){b.a&&b.a(a,l);return}if(b.b&&1<g.length)for(d=0;d<g.length;d++)b.b(a,g[d])}Na(a,b,c,1<g.length?{parts:g,type:"multipart"}:1==g.length?g[0]:{},!0)}
function Na(a,b,c,d,e){if(e&&"POST"!=b.method){e=U(a);var f=t("cache-lifetime"),f=parseInt(f,10),g=parseInt(t("cache-max"),10);if(!(0>=f||0>=g)){var g=E(),l=(parseInt(p["cache-counter"],10)||0)+1;q("cache-counter",l);g[e]={data:d,life:f,time:n(),count:l};setTimeout(fa,1E3)}}d.timing=c;if("navigate"==b.type&&(c=m(t("navigate-received-callback"),a,d),!1===c||c instanceof Error)){b.a&&b.a(a,c);return}b.k&&b.k(a,d)};function Oa(a){if(!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey||0<a.button)){var b=A(a.target,function(a){return w(a,t("link-class"))});!b||t("nolink-class")&&A(a.target,function(a){return w(a,t("nolink-class"))})||!(b=A(a.target,function(a){return a.href&&"img"!=a.tagName.toLowerCase()},b))||((b=b.href)&&b!=window.location.href&&Y(b),a.preventDefault())}}function Pa(a,b){Y(a,null,b&&b["spf-referer"],!0,!(!b||!b["spf-back"]))}
function Y(a,b,c,d,e){b=b||{};var f=m(t("navigate-requested-callback"),a);if(!1!==f)if(f instanceof Error)Z(a,f);else if(p["nav-init"]){$();var f=(parseInt(p["nav-counter"],10)||0)+1,g=parseInt(t("navigate-limit"),10),g=isNaN(g)?Infinity:g;if(f>g)Z(a);else if(q("nav-counter",f),f=n()-parseInt(p["nav-time"],10),g=parseInt(t("navigate-lifetime"),10),g=isNaN(g)?Infinity:g,f>g)Z(a);else{q("nav-time",n());var l=c||window.location.href;c=X(a,{method:b.method,b:function(a,b){W(a,b,e)},a:function(a,b){q("nav-request",
null);b instanceof Error&&Z(a,b)},k:function(a,b){q("nav-request",null);if(b.redirect)C(b.redirect,{"spf-referer":l},!0);else{var c=function(){m(t("navigate-processed-callback"),b)};"multipart"==b.type?c():W(a,b,e,c)}},n:b.postData,type:"navigate",p:l});q("nav-request",c);if(!d)try{ea(a,{"spf-referer":l})}catch(k){$(),Z(a,k)}}}else Z(a)}function $(){var a=p["nav-request"];a&&(a.abort(),q("nav-request",null))}function Z(a,b){b&&!1===m(t("navigate-error-callback"),a,b)||(window.location.href=a)}
function Qa(a,b){var c=b||{};return X(a,{method:c.method,b:function(a,b){W(a,b)},a:function(a,b){if(c.onError)c.onError(a,b)},k:function(a,b){if(b.redirect)Qa(b.redirect,{onSuccess:c.onSuccess,onError:c.onError});else if("multipart"!=b.type&&W(a,b),c.onSuccess)c.onSuccess(a,b)},n:c.postData,type:"load"})}
function Ra(a,b){var c=b||{};return X(a,{method:c.method,b:function(a,b){Ia(a,b)},a:function(a,b){if(c.onError)c.onError(a,b)},k:function(a,b){if(b.redirect)Ra(b.redirect,{onSuccess:c.onSuccess,onError:c.onError});else if("multipart"!=b.type&&Ia(a,b),c.onSuccess)c.onSuccess(a,b)},n:c.postData,type:"prefetch"})};window.spf={init:function(a){var b=!!window.history.pushState;a=a||{};for(var c in r){var d=c,e=c in a?a[c]:r[c];u()[d]=e}b&&(!p["history-init"]&&window.addEventListener&&(c=window.location.href,window.addEventListener("popstate",D,!1),q("history-init",!0),q("history-callback",Pa),q("history-listener",D),q("history-url",c),q("history-timestamp",n()),C(c,{"spf-referer":document.referrer})),!p["nav-init"]&&document.addEventListener&&(document.addEventListener("click",Oa,!1),q("nav-init",!0),q("nav-counter",
0),q("nav-time",n()),q("nav-listener",Oa)));return b},dispose:function(){window.history.pushState&&($(),p["nav-init"]&&(document.removeEventListener&&document.removeEventListener("click",p["nav-listener"],!1),q("nav-init",!1),q("nav-counter",null),q("nav-time",null),q("nav-listener",null)),p["history-init"]&&(window.removeEventListener&&window.removeEventListener("popstate",p["history-listener"],!1),q("history-init",!1),q("history-callback",null),q("history-listener",null),q("history-url",null),q("history-timestamp",
0)));u({})},navigate:function(a,b){a&&a!=window.location.href&&Y(a,b)},load:Qa,process:W,prefetch:Ra,scripts:{load:pa,unload:function(a){na("js",a)},ignore:function(a){M("js-"+K(a))},prefetch:qa},styles:{load:wa,unload:function(a){na("css",a)},ignore:function(a){M("css-"+K(a))},prefetch:xa}};})();
