(function () {
    var w=window,d=document,l,r,kc,t,
    sbox = d.getElementsByName("p")[0],
    sBdr = d.getElementById('fp-search-bdr'),
    sBdrClasses = sBdr.className,
    sBdrFocusClass = " brdr-focus",
    checkFocus = function (e) {
        try {
            kc = e.keyCode;
            t = (e.target) ? e.target : e.srcElement;
            l = sbox.value.length;
            if (t === sbox && l === 0 && (kc >= 32 && kc <= 40)) {
                sbox.blur();
            } else if (t.tagName !== 'EMBED' && t.tagName !== 'OBJECT' && t.tagName !== 'INPUT' && t.tagName !== 'TEXTAREA' && !e.altKey && !e.metaKey && !e.ctrlKey && (kc < 32 || kc > 40) && kc != 9 && kc != 13 && kc != 16) {
                if (l) {
                    if (sbox.setSelectionRange) {
                        sbox.setSelectionRange(l,l);
                    } else if (sbox.createTextRange) {
                        r = sbox.createTextRange();
                        r.moveStart('character', l);
                        r.select();
                    }
                }
                sbox.focus();
            }
        } catch(e) {}
    },
    focusInput = function (e) {
        sBdr.className += sBdrFocusClass;
    };
    blurInput = function (e) {
        sBdr.className = sBdrClasses;
    };
    if (sbox) {
        if (w.addEventListener) {
            w.addEventListener('keydown', checkFocus, false);
            sbox.addEventListener('focus', focusInput, true);
            sbox.addEventListener('blur', blurInput, true);
        } else if (w.attachEvent) {
            d.attachEvent('onkeydown', checkFocus);
            sbox.attachEvent('onfocus', focusInput);
            sbox.attachEvent('onblur', blurInput);
        }
        setTimeout(function(){
                sbox.focus();
            }, 1000);
    }
})();
