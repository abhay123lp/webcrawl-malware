import commands
import utils
import os

def zipfile(indir, outfile):
	cmdzip = 'gzip -r -c ' + indir + ' > ' + outfile
	commands.getoutput(cmdzip)
	return os.path.getsize(outfile)


def zipdir(indir, grep, outdir):
	results = utils.lsgrep(indir, grep)
	emptyfile = open(outdir + '/' + 'emptyfile', 'w')
	for result in results:
		size = zipfile(indir + '/' + result, outdir + '/' + result)
		if size == 0:
			emptyfile.write(result + '\n')


if __name__=="__main__":
	zipdir('../../data/JSAdd2Tree/', 'MTerry', '../../data/JSZipped')

