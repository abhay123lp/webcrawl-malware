import commands
import codecs
import time
import sys
import re


# chrome="/home/ruian/Documents/Webcrawler/chromium/home/src_tarball/tarball/chromium/src/out/Release/chrome "
chrome = "/home/intern/chromium/src/out/Release/chrome "
# option=" --no-sandbox -incognito "
option = ""


ustopfile = '../data/URLs/alexaustop.txt'
outdir = '../data/JSFileWComments/'
outpart = ' > ' + outdir
back = ' &'

if len(sys.argv) == 2:
	dir=sys.argv[1]
	ustopfile = dir + '/data/URLs/alexaustop.txt'
	outdir = dir + '/data/JSFileWComments/'

ustop = codecs.open(ustopfile, encoding = 'utf-8', mode = 'r')

cmdsleep = 'sleep 3'
cmdkillchrome = 'killall chrome'

for website in ustop:
	print website
	website = website[:-1]
	outfilename = website.split('.')[0] + '.js'
	cmddeob = chrome + option + website + outpart + outfilename + back
	print cmddeob
	commands.getoutput(cmddeob + '\n' + cmdsleep + '\n' + cmdkillchrome)
ustop.close()

